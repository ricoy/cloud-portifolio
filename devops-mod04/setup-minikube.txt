Minikube Hands-on


Meme Link:
https://dev.to/otomato_io/kubernetes-deployment-hierarchy-17ek

# Criar conta na GCP

Link:

üîó https://cloud.google.com

# Verificar informa√ß√µes de faturamento (Billing)

# Criar um Novo Projeto: tcb-k8s  

# Criar uma VM (GCE) + Script para instalar o Docker

‚ñ∫ Enable "Compute Engine API"

‚Ä¢ Name: minikube
‚Ä¢ Region: us-central1 | Any zone
‚Ä¢ Machine Type: e2-medium [ 2 vCPU, 4 GB mem ]  https://minikube.sigs.k8s.io/docs/start/
‚Ä¢ Boot Disk: Ubuntu 22.04 LTS (x86/64) | Size: 30 GB

‚Ä¢ Identity and API access: [x] Allow full access to all Cloud APIs

‚Ä¢ Firewall: [x] Allow HTTP traffic

‚ñ∫ Script para instalar Docker...

‚Ä¢ Management | Automation: startup script:

#!/bin/bash
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh
chmod 666 /var/run/docker.sock
echo 'ClientAliveInterval 60' | tee --append /etc/ssh/sshd_config

# CREATE IT

------------------------------------------------------------------

# Accessando a VM 'minikube':

‚Ä¢ Na console da GCP | GCE, clique em 'SSH'
‚Ä¢ Removendo informa√ß√µes do prompt:  

vim ~/.bashrc  | Edit line 60 | Delete: '\u@\h' e ':'

# Validando Instala√ß√£o do Docker

docker version | docker ps | docker info


# Instalando Minikube

‚ñ∫ Passo 1: Download e Instala√ß√£o do 'Kubectl'

https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/

‚Ä¢ Download do bin√°rio do 'kubectl' [ Download the latest release ]
curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"

‚Ä¢ Instalando Kubectl:

sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl

‚Ä¢ Validando a instala√ß√£o do kubectl:

kubectl version
kubectl config view

‚ñ∫ Passo 2: download e Instala√ß√£o do 'Minikube'

https://minikube.sigs.k8s.io/docs/start/

curl -LO https://tcb-bootcamps.s3.amazonaws.com/bootcamp-devops-cloud/pt/module4/minikube-linux-amd64
sudo install minikube-linux-amd64 /usr/local/bin/minikube

minikube version

‚ñ∫ minikube start

minikube status

kubectl config view [ configura√ß√µes do k8s ]

kubectl get nodes   [ cluster 'minikube' created ]

kubectl get pods   [ not found ]

kubectl get replicaset      [ not found ]

kubectl get deployments   [ not found ]

kubectl get services  [ ClusterIP ]

Parte 2

# Minikube Dashboard

minikube addons list
minikube addons enable dashboard
minikube dashboard --url

kubectl proxy --address='0.0.0.0' --disable-filter=true

If Error: listen tcp 0.0.0.0:8001: bind: address already in use
Solu√ß√£o: sudo killall kubectl

http://PUBLIC-IP:PORT/DASHBORAD-URL

GCP Firewal | Create Firewall Rule: allow-minikube
Network: default | Targets: All Instances in the network
Source: 0.0.0.0/0
Protocols and ports:  Specified protocols and ports | TCP: 8001

# Stop na VM

TCB